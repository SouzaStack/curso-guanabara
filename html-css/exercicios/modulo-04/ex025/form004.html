<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário</title>
</head>
<body>
    <h1>Quarto formulário</h1>
    <form action="cadastro.php" autocomplete="on" method="get">
        <fieldset>
            <legend>Dados pessoais</legend>
            <p>
                <label for="iname">Nome:</label>
                <input type="text" name="name" id="iname" minlength="5" maxlength="20" placeholder="nome completo" required>
            </p>
            <p>
                <label for="iemail">Email:</label>
                <input type="email" name="email" id="iemail" placeholder="seuemail@dominio.com" required>
            </p>
            <p>
                <label for="iphone">Telefone:</label>
                <input type="tel" name="phone" id="iphone" placeholder="(99) 9 9999-9999" pattern="(\([0-9]{2}\))\s([9]{1})?([0-9]{4})-([0-9]{4})" title="Número de telefone precisa ser no formato (99) 9 9999-9999" maxlength="15" required>
            </p>
        </fieldset>
        <!-- Estudar mais sobre RegEx -->
        <p>
            <input type="submit" value="Enviar">
            <input type="reset" value="Limpar">
        </p>
    </form>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
          const phoneInput = document.getElementById('phone');
    
          phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove todos os caracteres não numéricos
            let formattedValue = '';
    
            if (value.length > 0) {
              formattedValue = '(' + value.substring(0, 2);
            }
    
            if (value.length > 2) {
              formattedValue += ') ' + value.substring(2, 7);
            }
    
            if (value.length > 7) {
              formattedValue += '-' + value.substring(7, 11);
            }
    
            e.target.value = formattedValue;
          });
        });
      </script>

</body>
</html>